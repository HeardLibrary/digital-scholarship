---
permalink: /script/codegraf/006/
title: CodeGraf - Lists and loops
breadcrumb: OO6
---

Previous lesson: [Using code libraries](../005)

# Lists and loops

In this lesson we introduce a more complex object: a *list*. A list is a named one-dimensional data structure that allows us to store any number of items and reference them by an *index*. The lesson describes several ways lists are created. It also introduces some ways to manipulate and edit lists. The lesson concludes with two kinds of *loops*, which are ways to step through *iterable* objects like lists or to repeat an action many times.

**Learning objectives** At the end of this lesson, the learner will:
- describe a list object.
- construct a list by specifying its members.
- refer to a list item by its index.
- create lists using functions and methods.
- extract part of a list by slicing.
- randomize or order (alphabetize) a list.
- randomly select an item from a list.
- modify, remove, or add a list item.
- print the items on a list using a `for` loop.
- explain how an *indented code block* is used to define sections of code.
- use a `range()` object to perform action a fixed number of times.
- iterate through a `range()` object using a `for` loop and use the value in a calculation.
- describe how a `while` loop ends when it has an indefinite number of iterations.
- set up a `while` loop to perform actions in an indented code block.
- describe how an empty string can be generated by the enter/return key.
- build a string by repeatedly concatenating additional strings to an empty string.
- build a list by repeatedly appending additional items to an empty list.
- describe the actions that occur when several methods are attached sequentially.

Total video time: 58m 39s

## Links

[Lesson Jupyter notebook at GitHub](https://github.com/HeardLibrary/digital-scholarship/blob/master/code/codegraf/006/006.ipynb)

[Lesson Colab notebook]()

[CodeGraf project at Azure](https://notebooks.azure.com/steve-baskauf/projects/codegraf) notebook: `006.ipynb`

[Lesson slides](../slides/lesson006.pdf)


# Lists

## Introduction to lists (5m58s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/Z3-gPTHsYJ0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

A list is a sequence of objects.  The objects may be the same or different, but often are the same.  The order of the list is important and items can be referenced by their position in the list, numbered from zero.  

A list is created by putting the sequence in square brackets, separated by commas.  In the following example, a list is assigned to a variable:

```python
basket = ['apple', 'orange', 'banana', 'lemon', 'lime']
```

To reference a particular item, write the variable name followed by square brackets containing the index (position) of the object in the sequence: `basket[2]`.

To determine the count of items in a list, use the `len()` function.  In this example, it would be `len(basket)`, which would have a value of 5.  


----

## Lists as output of functions (5m44s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/X1lSuOQbliA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

`listdir()` (list directory) function from `os` module.

```
from os import listdir

items_in_working_directory = listdir() # no argument for current working directory
print(items_in_working_directory)
```

`sample()` function from random module

[`random` module documentation](https://docs.python.org/3.3/library/random.html)

```
import random

population = int(input('How many items in hat? '))
n = int(input('How many items to draw from hat? '))
# sample without replacement
pull_from_hat = random.sample(range(population), n) # first argument is a range object, second is number of samples
print(pull_from_hat)
```

`.split()` string method

```
my_sentence = 'It was a dark and stormy night.'
words_list = my_sentence.split(' ')
print(words_list)
```

----

## Slicing a list (5m07s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/mGnQCI6RcCk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

A *slice* of the list can be referenced using the following notation: `basket[1:4]`.  **Important note: in Python, when ranges are specified, for some reason, the last number in the range is one greater than the actual position in the range.**  So in this example, items 1 through 3 will be included. Since counting in Python is zero based, that means that the slice will contain the second through fourth items.

```
basket = ['apple', 'orange', 'banana', 'lemon', 'lime']
a_slice = basket[1:4]
print(a_slice)

# Slicing from the beginning
print(basket[:4])

# Slicing to the end
print(basket[2:])

# Slice relative to the end
print(basket[-2:])
```

Retrieving parts of strings uses the same notation as lists.  (You can essentially think of a string as a list of characters.)  So to get a particular character:

```python
nobelPeacePrize = 'Dag Hammarskj\u00f6ld'
print(nobelPeacePrize[2])
```

and to get part of a string, use a slice:

```python
nobelPeacePrize = 'Dag Hammarskj\u00f6ld'
print(len(nobelPeacePrize))
print(nobelPeacePrize[12:15])
```

Notice that escaped characters count as a single character even if we write them as an escape sequence using several characters.


----

## Manipulating lists (4m15s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/E4DgTGHn0S8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


**Randomize** a list. Use the `shuffle()` function from the `random` module.

Pass in the list to be randomized as the argument.

There is no return value.

```
import random as r

cards = ['Ac', '2c', 'Jc', 'Qc', 'Kc', 'Ah', '2h', '3h']
# Shuffle acts on the list object. It does not return a list.
r.shuffle(cards)
print(cards)
```

**Sort** a list. Use the `.sort()` list method. 

No argument is required.

There is no return value

```
day_list = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
# Sort acts on the list item. It does not return a list.
day_list.sort()
print(day_list)
```

Pick a **random item** from a list. Use the `choice()` function from the `random` module.

The list to pick from is passed in as an argument.

The return value is the selected list item.

```
day_list = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
# Choice returns a single item from a list
print(day_list)
picked_day = r.choice(day_list)
print(picked_day)
```

----

## Modifying a list (4m20s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/d5CWyyg_vQ4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

To add an item to a list, use the `.append()` method.  Here is an example:

```python
basket.append('durian')
```

Notice that there is no assignment with this method -- you simply apply it and the list itself is changed. 

A list can also be empty.  You can create an empty list like this:

```python
hungry = []
```

You can then add items to the list using the `.append()` method. 

To change an item in a list, just assign a new value to that item:

```python
basket[1] = 'tangerine'
```

To remove an item from the list using its value, use the `.remove()` method:

```python
basket.remove('banana')
```

You can also delete an item using its index number:

```python
del basket[3]
```

Two lists can be combined using the `+` operator.  


----

# Loops

## for loops (5m46s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/uAlD1Y5e4Ao" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

A very common task in Python is to repeat some code multiple times.  For example, suppose we want to do something with every item in a list.  A list is *iterable*, meaning that you can step through the list and operate on each of the items in the sequence.  Here's an example:

```
basket = ['apple', 'orange', 'banana', 'lemon', 'lime']
for fruit in basket:
    print('I ate one ' + fruit)
print("I'm full now!")
```

Each time the script iterates to another item in the list, it repeats the indented code block below the `for` statement and the value of the iterator (`fruit` in this case) changes to the next item.  Strings are also iterable:

```
word = 'supercalifragilisticexpialidocious'
print('Spell it out!')
for letter in word:
    print(letter)
print('That wore me out.')
```


----

## Iterating over a range object (10m28s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/WeoJz01w1ww" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

You can generate an iterable range of numbers using a `range()` object.  The form of the numbers we use in `range()` is similar to the numbering in slices, although we separate them with commas.  The first number is the starting number and the second number is one more than the ending number. An optional third number can specify the step (e.g. 2 would generate every second number).  The step can also be negative.

We can use a `for` statement to iterate through a range.  Here are examples:

```python
for count in range(1,11):
    print(count)
```

```python
print('Prepare to launch!')
for countDown in range(10,0,-1):
    print(countDown)
print('Lift off!')
```

Notice how we need to be careful that our second number goes one step beyond our intended range.  

```python
cheer = ''
for skipper in range(2, 10, 2):
    cheer = cheer + str(skipper) + ', '
cheer = cheer + 'who do we appreciate?'
print(cheer)
```

Notice in this example that if we wanted to treat the integer that we generated as a string, we needed to convert it to a string using the `str()` function. That allows us to do a clever trick of starting the `cheer` object as an empty string, then concatenating more strings to its end each time the code block is executed in the loop.

Ranges are often used to index list items when we want to iterate through a list, but have access to the index number.  Here is an example:

```python
basket = ['apple', 'orange', 'banana', 'lemon', 'lime']
print("Here's a list of the fruit in the basket:")
for fruitNumber in range(0, len(basket)):
    print(str(fruitNumber+1) + ' ' + basket[fruitNumber])
print('You can see that there are ' + str(len(basket)) + ' fruits in the basket.')
```

Notice several things:
1. Because the number of items in the list `len(basket)` (5) is one more than the index of the last item in the list `basket[4]`, the range covers the entire list, since ranges must end one number greater than the range you want.
2. I had to add 1 to the `fruitNumber` as it iterated because Python counts starting from zero and I wanted to start numbering from one.
3. I had to use the `str()` function each time I wanted to concatenate one of the integer numbers to other strings. I also could have printed the numbers by passing them into the `print()` function as several arguments separated by commas. That would not have required converting them from integers to strings.


----

## while loops (10m44s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/UU1i2KhFg9I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Example:

```
power = 0 # must have an initial value
exponent = 0
print('exponent\tpower') # \t is the escaped tab character
while power < 100:
    power = 2**exponent  # exponentiation is done with **
    exponent += 1 # incrementing is critical for the loop to end
    print(exponent, '\t', power)
print("Those are the powers of two.")
```

Pressing the return/enter key without entering any text generates an empty string (`''`). We can use this as a way for a user to indicate that they are done entering items.

```
print('Enter your list items and press Enter when done')
item = 'something'
word_list = []

while item != '': # check for the empty string
    item = input('Next item: ')
    word_list.append(item)

# remove the final empty string
del word_list[len(word_list)-1]
#word_list = word_list[:len(word_list)] # alternate way to remove by slicing
print('Your list is:', word_list)
```

**Notes:**
1. Here we use a similar trick to the one we saw earlier where we built upon an empty string. In this example, we start with an empty list, then add list items one at a time until the user indicates that they are done by pressing the enter key.
2. Because the `while` loop tests the condition at the start of the loop, the empty string entered by the user gets added to the list during the execution of the indented code block. So when the loop is finished, we need to remove the extra empty string that got added to the end of the list. The script uses the `del` command, but an alternate method is in the commented-out line. That alternate method generates a slice of the list from the first item to the next to last item, then replaces the original list with the slice.


----

## Aside: Applying methods sequentially (6m17s)

This optional section describes two approaches to carring out methods sequentially.

<iframe width="1120" height="630" src="https://www.youtube.com/embed/Lx0HGUmfX-g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Applying several methods sequentially in a single statement results in very compact code. But the code becomes less understandable than when the methods are carried out in separate statements.

**Note:** In order to apply methods sequentially as shown here, the return value of a method must be an object that is of the correct type to be operated upon by the next method. In this example, `my_sentence` is a string, which can be operated upon by the `.lower()` method. The `.lower()` method returns a string, which can be operated upon by the `.split()` method. The `.split()` method returns a list, which can be operatied upon by the `.count()` method. The `.count()` method returns an iteger and that is the type of the output of the entire sequence of methods.

In some cases, it makes sense to just pile up several methods. For example, if we just want a line of code that generates a ISO 8601 dateTime string to be used for a timestamp, it's convenient to just put the code on one line like this:

```
import datetime
# Generate an ISO 8601 dateTime string
wholeTimeStringZ = datetime.datetime.utcnow().isoformat() # form: 2019-12-05T15:35:04.959311
```

This basically serves as a utility for us and documenting how all of its pieces work isn't really that important for understanding the code.

----

# Practice

1. Improve the list entry example by making it produce an alphabetized list.
2. Improve the list entry script by making its alphabetizing case-insensitive.
3. Have the list entry script print each of the items on the list on a separate line.
4. Alphabetize the list of files in your current working directory, then print each file name on a separate line.
5. In [a famous story](http://wbilljohnson.com/journal/math/gauss.htm), the young mathematician Karl Gauss’s teacher assigned him the task of adding all of the numbers from 1 to 100, with the intention of keeping him busy for a while. It didn’t work because in a few moments, Gauss calculated the answer, 5050, using some clever thinking. However, if Gauss were in school now, he could just write a Python script to do the calculation. Write a script using range() to add all the numbers from 1 up to any number that you choose. Note: if you use the input() function to get the person’s number, you’ll need to use the int() function to turn the entered string into an integer number.
6. The game Yatzee involves rolling five dice and trying to get “poker hands” like three of a kind, a straight, etc. You can simulate the rolling of a die using a function from the random module:

```
randomNumber = r.randrange(1, 7)
```
Simulate the rolling of five dice as follows:

 - create an empty list
 - run a for loop five times
 - each loop, generate a random number and append it to the list
 - print the list.

----


----
Revised 2020-05-12
