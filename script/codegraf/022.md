---
permalink: /script/codegraf/022/
title: CodeGraf - Reading and writing CSV files
breadcrumb: O22
---

[CodeGraf landing page](../)

[Complex data structures](../021)

# Reading and writing CSV files

If we load

**Learning objectives** At the end of this lesson, the learner will be able to:
- descr

Total video time: 33 m 46 s

## Links

[Lesson Jupyter notebook at GitHub](https://github.com/HeardLibrary/digital-scholarship/blob/master/code/codegraf/022/022.ipynb)

[Lesson Colab notebook](https://colab.research.google.com/drive/1pM_sZW_gAbPNKAu)

----

# CSV files

## About CSV files (7m29s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/gPyHNyRwfxk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

An extremely common way to store tabular data is in *fielded text files*, commonly called *"CSV"* (comma separated values) files.  "Fielded text" is probably a better term, because the fields in the text aren't always delimited by commas.  It is also fairly common for fields to be separated by tabs or some other characters.  But it's still common to call them "CSV" files regardless of the delimiter.

A CSV file is simply a text file where the rows are on separate lines terminated by newlines, and the fields (i.e. columns) within the row are separated by commas.  Here's an example:

```
given_name,family_name,username,student_id
Jimmy,Zhang,rastaman27,37258
Ji,Kim,kimji8,44947
Veronica,Fuentes,shakira<3,19846
```

Paste this text into a text editor, then save it as `students.csv`. Alternatively, you can just run this code, which will write the text into a file for you:

```
someText = '''given_name,family_name,username,student_id
Jimmy,Zhang,rastaman27,37258
Ji,Kim,kimji8,44947
Veronica,Fuentes,shakira<3,19846'''
with open('students.csv', 'wt', encoding='utf-8') as fileObject:
    fileObject.write(someText)
```

You can then open the file with a spreadsheet program like Excel, Open Office, or Libre Office.  If you do, it will look something like this:

<img src="../../python/images/open-office-table.png" style="border:1px solid black">

You can also create the CSV file directly in the spreadsheet program, then use Save As... to save it in the CSV format.

**Note:** Although it is convenient to use Excel to work with CSV files since most people have Excel on their computers, if you are going to do serious work with CSV files using Excel is NOT recommended.  The reason for this is that Excel automatically converts some strings that include dashes (typically ID numbers or other codes) into dates when it imports them.  Because CSV files do not contain any metadata describing the format of the files, there is no known way to prevent this problem.  It is a frustrating and insidious problem that can ruin a large dataset in ways that are difficult to repair.  So it is better to install and use Libre Office (open source) or Open Office and use them instead.

When saving a newly-created CSV file, you should use Save As... In Libre or Open Office, there is a checkbox in the dialog where you have the option to Edit Filter Settings.  

<img src="../../python/images/edit-filter-settings.png" style="border:1px solid black">

The subsequent dialog box allows you to select a field delimiter, which will usually default to comma:

<img src="../../python/images/pick-delimiters.png" style="border:1px solid black">

There is also a dropdown where you can select UTF-8 as the file encoding:

<img src="../../python/images/select-utf-8.png" style="border:1px solid black">

If your file contains only ASCII characters (Latin alphabet, numeric, and typical symbol characters), the Edit Filter Settings isn't that critical, but if your text contains any non-Latin language characters, unusual symbols, or letters with diacritics, it's critical to make sure that the file is saved as UTF-8.  

Libre or Open Office tend to assume that you want to use the last delimiter and character encoding that you used previously, so once you have saved a CSV file in this manner, it's usually safe to open and close it by just saving without going through the `Save As...` dialog.

----

## Generating a CSV file from text (1m52s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/5Ub557F5fhg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

----

# CSV reader/writer module

## Using the csv.reader() object (2m44s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/HeMsMKUNthM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

----

## Function to read from a CSV into a list of lists (3m44s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/t-1hSXpfFrc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

----

## Writing a list of lists to a CSV (2m52s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/MkvI8PwAlkg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

----

## Function to read from a CSV into a list of dictionaries (8m07s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/g2SY3ACHxiU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

----

## Writing a list of dictionaries to a CSV file (2m08s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/p2HYpIQB880" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

----

## Reading a CSV file from the Internet (4m50s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/Gx-6bvtbJDU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

----



# Practice exercises


----

Next lesson: [x](../023)

----

Revised 2020-10-15
