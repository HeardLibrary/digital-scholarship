---
permalink: /script/codegraf/040/
title: CodeGraf - Sensors with CircuitPython - Running sensors remotely
breadcrumb: O40
---

[return to CircuitPython landing page](../../python/circuit/)

Previous lesson: [Programming the board](../039)

This page is still under construction. Please check back later to see the finished product.

# Sensors with CircuitPython: Running sensors remotely

**Learning objectives** At the end of this lesson, the learner will be able to:
- explain why the QT Py RP2040 cannot write data to its memory under normal operation.
- use `try...except...` clauses to prevent a Python script from terminating when an error is thrown.
- draw a sketch showing how a switch and pull-up resistor can be used to change the voltage of an input pin from high to low. 
- state how Boolean True and False states are related to voltages in a logic circuit.
- state what is special about the `boot.py` file in CircuitPython.

Total video time:  min  s

# Links


----

## CircuitPython memory limitations (3m45s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/39tVlYYgdZ4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

.

`try ... except ...` example:

```
number_string = input('Enter a number: ')
number = int(number_string)
try:
    print(10/number)
except:
    print('Division by zero is undefined.')
```

Read-only error trapping code:

```
try:
    # use "w" to clear previous data and "a" to append new data to the end of the file
    with open("/temperature.txt", "w") as file_object:
        for count in range(10):
            print("Temp: %.2f C" % hts.temperature)
            temp = hts.temperature
            file_object.write(str(temp) + '\n') # must convert numbers to strings if using the write method
            file_object.flush() # writes the file buffer to the file after each datum is written to the buffer.
            time.sleep(delay_time)
except OSError as e:
    if e.args[0] == 30:
        print('read-only error')
    else:
        print('error', e.args[0])
```

----

## Controlling the read/write mode of memory (3m58s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/gK3b3BL4pfg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

.

[pull-up resistors reference](https://learn.sparkfun.com/tutorials/pull-up-resistors/all)

[general reference on writing to a microcontroller filesystem](https://learn.adafruit.com/cpu-temperature-logging-with-circuit-python/writing-to-the-filesystem)

[additional reference on CircuitPython storage](https://learn.adafruit.com/circuitpython-essentials/circuitpython-storage)

`boot.py` script to control read/write state:

```
import board
import digitalio
import storage

switch = digitalio.DigitalInOut(board.D0)
switch.direction = digitalio.Direction.INPUT
switch.pull = digitalio.Pull.UP

# Connecting D0 to ground makes switch.value False 
storage.remount("/", switch.value)
```

----

# Flight data sensors

We will use two sensors to collect flight data during the model rocket launch. The `BMP 280` barometer sensor can also be used as an altimeter. The `LSM6DS33` 9 degrees of freedom inertial measurement unit board contains several sensors on the same board. It contains an accelerometer that can make measurements in the X, Y, and Z directions and a gyroscope that detects rotation in three dimensions. It also contains a magnetometer that we will not be using in this demonstration, but which can be used to determine the sensor's orientation within the earth's magnetic field.

## Barometer/altimeter

----

## 9 DOF accelerometer/gyroscope/magnetometer

<iframe width="1120" height="630" src="https://www.youtube.com/embed/P1IcSjyeVZU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

.


----
Revised 2022-03-04
