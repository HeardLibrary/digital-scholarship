---
permalink: /script/codegraf/021/
title: CodeGraf - Complex data structures
breadcrumb: O21
---

[CodeGraf landing page](../)

[Data from files](../020)

# Complex data structures and functions

In this lesson we will combine two basic Python data structures, lists and dictionaries, to create two dimensional data structures that can be used to store tabular data. We will see how nested for loops can be used to access all of the data in those tables. We will also learn how to make blocks of code reusable by creating our own functions.

**Learning objectives** At the end of this lesson, the learner will be able to:
- create a complex Python data structure by creating a list that contains lists or dictionaries as list items.
- describe how a list of lists can be compared to cells of a table.
- reference an item in a list of lists by correctly placing index numbers in square brackets.
- Use nested `for` loops to print all of the items in a list of list.
- Create nested `for` loops that iterate through the range of indices instead of the list objects themselves.
- describe how a list of dictionaries can be compared to cells of a table.
- reference an item in a list of dictionaries by correctly placing the row index number and column key string in square brackets.
- describe how ordering of columns differs between a list of lists and a list of dictionaries.
- write code to step through a list of dictionaries and check for a match of one of the character's dictionary items to the value of a search characteristic.
- write a function with one parameter and a return value.
- explain the difference between variables that are local to a function and global variables.
- explain the difference between a function definition and a function call in the code of a script.
- compare the *arguments* of a function call and the *parameters* of a function definition.

Total video time: 30 m 20 s

## Links

[Lesson Jupyter notebook at GitHub](https://github.com/HeardLibrary/digital-scholarship/blob/master/code/codegraf/021/021.ipynb)

[Lesson Colab notebook](https://colab.research.google.com/drive/1pM_sZW_gAbPNKAu)

----

# Complex data structures

## Lists of lists (5m05s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/UP3K-EiG9gU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

A list can contain any object, including other lists.  In some programming languages, there are two-dimensional structures called *arrays*.  To create an array-like structure in Python, we can make a list of lists.  Here's an example:

```python
firstRow = [3, 5, 7, 9]
secondRow = [4, 11, -1, 5]
thirdRow = [-99, 0, 45, 0]
data = [firstRow, secondRow, thirdRow]
```

An equivalent way to have created this list of lists would have been:

```python
data = [[3, 5, 7, 9], [4, 11, -1, 5], [-99, 0, 45, 0]]
```

We can think of a list of lists like a table where the first index represents the row and the second index represents the column.

![list of lists as a table](list-of-lists.png)

To reference an item in a list of lists, first reference the outer list position, then the inner position.  For example, to refer to the first item in the third list, use `data[2][0]`. In the table model, we can think of the indexing as `data[column][row]`.

----

## Nested for loops (3m07s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/0QEAkL9nS_Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Example code:

```
for row in data:
    for column in row:
        print(column)
```

----

## Nested for loops with range() (4m14s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/qsht_LBKKTw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Example code:

```
for row in range(len(data)):
    print('row:', row)
    for column in range(len(data[row])):
        print('column', column, ':', data[row][column])
```

![nested for loop using range](nested-loop-range.png)

----

## Lists of dictionaries (4m58s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/1w7Cuog4LbQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Example code:

```
characters = [{'name':'Mickey Mouse', 'company':'Disney', 'gender': 'male'}, {'name':'Daisy Duck', 'company':'Disney', 'gender': 'female'}, {'name':'Daffy Duck', 'company':'Warner Brothers', 'gender': 'male'},  {'name':'Fred Flintstone', 'company':'Hanna Barbera', 'gender': 'male'}, {'name':'WALL-E', 'company':'Pixar', 'gender': 'neutral'}, {'name':'Fiona', 'company':'DreamWorks', 'gender': 'female'}]
```

![list of dictionaries as a table](list-of-dictionaries.png)

----

## Lists of dictionaries examples (5m40s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/6JnCBMK4srI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Example code:

```
# Assign the list of dictionaries to a variable
characters = [{'name':'Mickey Mouse', 'company':'Disney', 'gender': 'male'}, {'name':'Daisy Duck', 'company':'Disney', 'gender': 'female'}, {'name':'Daffy Duck', 'company':'Warner Brothers', 'gender': 'male'},  {'name':'Fred Flintstone', 'company':'Hanna Barbera', 'gender': 'male'}, {'name':'WALL-E', 'company':'Pixar', 'gender': 'neutral'}, {'name':'Fiona', 'company':'DreamWorks', 'gender': 'female'}]

# Step through the list of characters to check if each one is a match
character_name = input("What's the character's name? ")
for character in characters:
    if character['name'] == character_name:
        print('The character ' + character['name'] + ' works for ' + character['company'] + '.')
```

More complex code example with case insensitivity, boolean `in` test, and flag to error trap for no match: 

```
characters = [{'name':'Mickey Mouse', 'company':'Disney', 'gender': 'male'}, {'name':'Daisy Duck', 'company':'Disney', 'gender': 'female'}, {'name':'Daffy Duck', 'company':'Warner Brothers', 'gender': 'male'},  {'name':'Fred Flintstone', 'company':'Hanna Barbera', 'gender': 'male'}, {'name':'WALL-E', 'company':'Pixar', 'gender': 'neutral'}, {'name':'Fiona', 'company':'DreamWorks', 'gender': 'female'}]
character_name = input("What's the character's name? ")
found = False
for character in characters:
    if character_name.lower() in character['name'].lower():
        found = True
        if character['gender'] == 'male':
            answer = 'He works'
        elif character['gender'] == 'female':
            answer = 'She works'
        else:
            answer = 'They work'
        answer = answer + ' for ' + character['company'] + '.'
        print(answer)
if not(found):
    print("I don't know that character.")
```

----

# Defining functions

## Defining your own function (5m34s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/xNpXwvP5fCU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

**What's going on inside a function?**
- *Parameters* are placeholder variables for arguments.
- The *scope* of variables assigned inside the function is *local*.
- Variables assigned in the main script are *global* and can be used in the function.

![diagram of internal parts of a function](function-internal.png)

Features of user-defined functions:
- Functions are defined using the def statement.
- The def statement ends with a colon.
- The function can have zero to many parameters.
- The function code is an indented code block.
- The function can return one or more values or nothing.

----

## Example of defining a function (1m43s)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/1X9a7ZoPzdw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Example code:

```
def multiplication(first_number, second_number):
    answer = first_number * second_number
    return answer
```

`first_number` and `second_number` are *parameters* of the function. `answer` is the return value. Don't forget the colon at the end of the `def` statement and to indent the code block.

----

# Practice exercises

1. **Dealing cards** Here is some code that generates a deck of cards as a list:

The code after the makeDeck() function shows how the choice() function and the .shuffle() method can be used to randomize the cards in the deck.

a. Use this function to write a script that “deals” a five card poker hand by printing five random cards from the deck. Note that after each card is printed, it has to be removed from the deck so that when the next card is printed, there isn’t any chance that you’ll get the same one a second time.

b. Instead of just printing the five cards, use .append() to add them to another list called hand. Print the whole hand list.

c. Can you figure out how to check for any kind of poker hands? How about a flush?




3. **Latte maker**  Create the latte-making function `makeLatte(beans, milk, extras, water)` described earlier in the exercise.  The function will need to have some complicated `if` statements to check for the kinds of beans, milk, and extras.  You should consider whether you should create additional functions that would be called by the `makeLatte()` function to figure out things about the possible ingredients.  Here are the program parameters:

**Minimum inputs** (you can have more):

| variable | possible string values |
|---|---|
| beans | "decaf", "regular", "dark roast" |
| milk | "whole", "skim", "soy" |
| extras | "none", "pumpkin spice", "vanilla" |
| water | "yes", "no" |

**Required output**:

Print a single string formed by concatenating adjective strings in front of the string "latte".  You can use whatever adjectives you think would work best for marketing, but at a minimum, you should be able to produce "regular non-fat plain latte", "decaf skinny vanilla latte", and "dark fat pumpkin spice latte" (substitute a different adjective for "fat" if you can think of a better euphamism).  If "no" is selected for water, then provide some kind of error message.  

1\. Here is the last example in the *List of dictionaries* section:

```python
characters = [{'name':'Mickey Mouse', 'company':'Disney', 'gender': 'male'}, {'name':'Daisy Duck', 'company':'Disney', 'gender': 'female'}, {'name':'Daffy Duck', 'company':'Warner Brothers', 'gender': 'male'},  {'name':'Fred Flintstone', 'company':'Hanna Barbera', 'gender': 'male'}, {'name':'WALL-E', 'company':'Pixar', 'gender': 'neutral'}, {'name':'Fiona', 'company':'DreamWorks', 'gender': 'female'}]
characterName = input("What's the character's name? ")
found = False
for character in characters:
    if character['name'] == characterName:
        found = True
        if character['gender'] == 'male':
            answer = 'He works'
        elif character['gender'] == 'female':
            answer = 'She works'
        else:
            answer = 'They work'
        answer = answer + ' for ' + character['company'] + '.'
        print(answer)
if not(found):
    print("I don't know that character.")
```

Because we have `if` inside of `if` inside of a `for` loop, the code is too complicated and requires paying careful attention to the indentation.  It is probably better in a circumstance like this to create a function for part of the code.  That makes the code more readable because you only have to think about small bits of the code at a time.  Re-write the code so that the section with all of the `if` statements is moved into a function called `checkGender` that prints the answer (if appropriate) and returns the `found` variable.  Make sure that you pass all of the variables into the function that it needs (i.e. `character`, `characterName`, and `found`).
----

Next lesson: [Reading and writing CSV files](../022)

----

Revised 2020-10-15
