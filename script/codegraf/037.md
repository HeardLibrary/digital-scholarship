---
permalink: /script/codegraf/037/
title: CodeGraf - R viz using ggplot - Interactive ggplots using Shiny
breadcrumb: O37
---

Previous lesson: [Controlling plot dimensions](../036)

# R viz using ggplot: Creating interactive ggplots using Shiny

Previously, we have made plots that are static. That is, once plotted they do not change and there is no way for the user to interact with them. In this lesson, we will combine ggplot with Shiny, the R-based system for creating web pages that allow you to interact with visualizations.

**Learning objectives** At the end of this lesson, the learner will be able to:
- contr

Total video time: n/a

# Links

[Lesson R script at GitHub](https://github.com/HeardLibrary/digital-scholarship/blob/master/code/codegraf/037/037.R)

[Lesson slides]()

[First lesson of Shiny tutorial](https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/)

----

# What is Shiny?

Shiny is an R package that can be used to build web pages that are interactive (a web "app"). It's installed like any other R package. 

## Running Shiny in RStudio

There are some conventions on how the parts of a shiny application are named and saved as files. If these conventions are followed, RStudio knows how to "run" the app. It will change the normal `Run` button to a `Run App` or `Reload App` button. When you run the app using a local installation of RStudio, a separate window will pop up. 

![Shiny app and RStudio windows](shiny_windows.png)

This window is essentially a stripped down browser that is displaying a web page generated by a localhost server on your computer (if you are running RStudio locally). If you don't know what this means, but want to, see [this lesson](https://heardlibrary.github.io/digital-scholarship/computer/command-unix/#localhost-web-servers) for more information. (The 127.0.0.1 address shown at the top of the popup window is the standard loopback address also known as `localhost:`.)

You can run Shiny using RStudio Cloud. However, it requires opening a popup window. So if your browser settings block popup windows, you will have to create an exception for the web address used by RStudio Cloud. For example, RStudio Cloud generates this warning when I use it in Firefox:

![RStudio popup warning](firefox_popup_warning.png)

To fix it, I have to go to the security settings and laboriously type in the long UUID for the subdomaion of `rstudio.cloud`. 

![Firefox popup blocker exception](firefox_popup_exception.png)

After clicking `Allow` and saving the change, I can return to the `Popup Blocked` warning and click `Try Again`. The Shiny app window should then appear.

# Components of a Shiny app

![User interface-server diagram](ui_server.png)

There are two parts of the Shiny app that need to be created for each app. They are defined as R functions. One part defines the user interface (UI), which is the interactive web page displayed in the browser. The other part defines the web server that is generating the content behind the scenes. These two components are shown in the diagram above. If you are using RStudio Cloud, the server generating the visualization will be at some remote location (wherever rstudio.cloud is hosted). If you are using a local installation of RStudio Cloud, the server generating the visualization is running inside your local computer just like the browser. 

In either case, the Shiny code is broken into two parts, the function that tells the server how to generate the visualization, and the function that tells the UI (browser) how to display it. Here is a skeleton showing the main parts of the code (we will fill in the details later):

```
library(shiny)
library(ggplot2) 

# Define UI for app that draws a histogram ----
ui <- fluidPage(

\{ code describing the layout of the web page goes here \}

)

# Define server logic required to draw a histogram ----
server <- function(input, output) {

\{ code describing how the server should generate the visualization goes here \}

}

# Start the Shiny app running
shinyApp(ui = ui, server = server)
```

----

# Practice assignment

1. Load th


----
Revised 2021-10-03
